version: 1

script:
  - mkdir -p AppDir/usr/bin AppDir/usr/share/icons/hicolor/{192x192,scalable,symbolic}/apps AppDir/usr/share/firejail AppDir/usr/share/metainfo
  - cp data/io.github.noobping.listenmoe.png AppDir/usr/share/icons/hicolor/192x192/apps/
  - cp -r data/scalable/apps/* AppDir/usr/share/icons/hicolor/scalable/apps/
  - cp -r data/symbolic/apps/* AppDir/usr/share/icons/hicolor/symbolic/apps/
  - cp target/release/listenmoe AppDir/usr/bin/
  - cp .listenmoe.profile AppDir/usr/share/firejail/listenmoe.profile
  - cp data/io.github.noobping.listenmoe.metainfo.xml.in AppDir/usr/share/metainfo/io.github.noobping.listenmoe.metainfo.xml

AppDir:
  path: ./AppDir

  app_info:
    id: io.github.noobping.listenmoe
    name: "LISTEN.moe"
    icon: io.github.noobping.listenmoe
    version: "1.0.1"
    exec: usr/bin/listenmoe

  apt:
    arch: amd64
    sources:
      - sourceline: "deb http://deb.debian.org/debian trixie main"
        key_url: "https://ftp-master.debian.org/keys/archive-key-12.asc"
    include:
      - ca-certificates
      - libcurl4
      - libssl3

AppImage:
  arch: x86_64
  update-information: guess
